to do for the matlab engine

change the signature of the function 
add declaration of the inner variable
close with copy to the out variable
change the extesion from c to cpp
